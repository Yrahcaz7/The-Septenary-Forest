const story = [
	[`
	"Where am I?"
	"What am I?"
	The Being became aware of its existence.
	"Where is everything?"
	The Being knew that something was missing.
	But it didn't know what that something was.
`, `
	The Being only saw nothingness.
	Only an empty void.
	The Being tried to remember.
	The Being tried and tried.
	And a glowing green spark appeared.
`, `
	The Being was facinated by this spark.
	The only thing in the void of nothingness.
	The Being thought and thought what to name it.
	And another spark appeared.
	"I shall call you... Essence."
`, `
	The Being discovered that thought was very important.
	More thoughts meant more Essence, when it was done thinking.
	It used this new Essence to broaden the horizon of its thought.
	The cycle continued, as the void filled with green.
	But something was missing.
`, `
	The Being decided that it needed something to measure thought.
	Perhaps this would help create more Essence.
	"Well, since thought is never pointless..."
	The Being thought some more.
	"I might be able to measure thought in its points."
	But that was not it. Something was still missing.
`, `
	The cycle slowed, and the Being became disheartened.
	But then, an idea occured to the Being.
	There is only Essence; but what is that Essence of?
	The Being delved deep into its thoughts.
	Down to the very core of its being.
	"This... is what the Essence is coming from. The Core."
`, `
	When the Being came back to, all the Essence was gone.
	The Being started the cycle again.
	Essence from the new Core was higher in quantity.
	The Being's thoughts were also clearer.
	The Being decided to reach for the Core again.
	And the new cycle began.
`, `
	As the Cores accumulated, the void filled with yellow.
	Two bright colors now shined in the everlasting void.
	However, the Being began to hit a wall.
	There was only so much the Being could do without knowledge.
	But then... the Being got an uneasy feeling...
	And started to REMEMBER...
`], [`
	"I... I've found it! Haha! I was right!"
	The scientist reveled in pleasure at finally proving his theory.
	"The thing smaller than a quark... the essence of the universe!"
	The scientist couldn't contain his exitement and started running around his lab. The lab was very messy, but he knew exactly where was safe and where was a death-by-slipping zone.
`, `
	"All I need to do now is submit my findings to the Committee!"
	The scientist started hurriedly packing up one of his samples.
	"Hehe... I can't wait to see all of their shocked expressions!"
	The scientist rushed out of the door in a flurry, and headed for the spacecraft at the dock.
	"Alright... booting up... come on... there we go!"
	The spacecraft launched off of the dock, carrying the scientist up into the atmosphere.
`, `
	Spacecraft: "Where is your destination?"
	Scientist: "The Committee in sector fifty nine."
	Spacecraft: "Do you mean Coast City in sector fifty?"
	The scientist frantically flailed his arms.
	Scientist: "No, no! The Committee! Nine sectors over!"
	Spacecraft: "Command received; now exiting atmosphere."
	Scientist: "When I get rich, I'll replace this damn broken thing."
`, `
	As the spacecraft hurtled through space, the scientist began organizing his luggage, sprawled all over the floor.
	"Oh, so <i>that's</i> where I put the arthropod!"
	The scientist picked up what looked like a mass of goo and teeth, and began staring at it.
	"What was it called again? A septenagipoda?"
	By the time the scientist had put everything in the spacecraft in neat piles, it had arrived at the Comittee.
`, `
	"Well, here goes nothing!"
	The scientist opened the door, and jumped out of the spacecraft.
	"It's been a long time since i've been here..."
	The scientist started walking across the floating metal platform, towards the towering structure in the center, having no idea what would come next...
	Building: "Do you have an appointment?"
	Scientist: "No. LS14H is here to report his findings."
	Building: "Verifying identity... verified. Please enter."
`, `
	The scientist entered the building, and then the floor started moving up very quickly.
	"I remember the first time I came here... throwing up my lunch was not very pleasant. Got fined for it too."
	As the elevator stopped, part of the wall slid upwards, revealing the chamber of the Comittee.
	Meanwhile, at the scientist's lab, an unfriendly visitor opened the door.
	The visitor looked completely robotic, even though there existed sufficently advanced technology to hide the fact.
	The visitor began searching through the scientist's samples...
`, `
	The visitor found what they were looking for; a sample of the essence.
	The visitor then placed it inside their robotic skull, and swiftly exited the lab.
	The visitor didn't know, however, that some types of essence are highly reactive with each other...
	<br><br>And suddenly everything was bathed in a pitch-black light.
`, `
	<br><br>Meanwhile, the scientist was presenting his findings to the Comittee, and was getting a lot of skeptical looks.
	Comittee member: "And how, exactly, do you know that everthing is made up of this?"
	Scientist: "I have already found evidence of four flavors of quarks being made up of essence. Right here, I have a sample of a bottom quark."
	Comittee member: "I know that, but what about the others?"
	Scientist: "I don't see any point in arguing about this."
	Comittee member: "Oh really? The files say that you, LS14H, have faked a discovery before!"
	Suddenly, the scientist's sample broke its container, as something similar to an explosion seemed to occur.
`, `
	The scientist dissapeared in an instant upon contact, and then the strange explosion shrank back down again.
	The comittee barely had any time to wonder what just happened, as black light broke through the side of the building...
	<br><br>And then everything was gone.
`], [`
	The Being remembered.
	Remembered the times of old.
	When the world was not just a void.
	The world was completely different back then.
	"Why... did everything dissapear?"
	"Why... am I the only being left?"
`, `
	The Being decided that thinking about that was useless.
	However, the Being could use this new knowledge to create even more Essence.
	The Being started again, with renewed determination.
	More thoughts. More Essence. More Cores.
	The Being started to piece together the memories.
`, `
	This knowledge contained information about Quarks.
	Quarks were the smallest discovered particles; they were the building blocks of the world.
	But the Being didn't see any Quarks in the endless void.
	The void contained nothing that was the same as in the knowledge.
	But then the being remembered something more...
`, `
	Quarks were made of Essence.
	Essence was the root of everything, the source.
	The Being began constructing Quarks with Essence in its mind.
	However, the Quarks the Being constructed were warped and strange.
	It was like the world was broken.
`, `
	The Being did not give up, and instead went further.
	The Being delved deep into the memories, and saw something.
	Larger particles were constructed from quarks.
	There were three known types: protons, neutrons, and electrons.
	These particles were called Subatomic Particles.
`, `
	With all this new knowledge, the Being created many more thoughts.
	And these thoughts, in turn, generated more essence.
	This new essence allowed for many more cores, as well.
	But the being reached the limit of the knowledge, and hit a wall.
	The being needed something new; something unique to the void.
`, `
	The Being delved deep into its being, reaching further than the core.
	Searching for something, anything that would help.
	The Being saw nothing, but did not give up.
	The Being used all of its senses, and probed as far as it could.
	Finally, the Being saw something new...
`], [`
	The Being glimpsed a new memory.
	Something of the kind it had never seen before.
	Great anger and hatred directed every way.
	Curses rooting from the very soul of beings.
	The Being then created an embodiment of this.
	And these new Hexes began filling the void.
`, `
	The Being was filled with hate of the old world.
	Anger and hatred permeated throughout it.
	The Being vowed to create a new, better world.
	It continued pouring out more and more Hexes...
	And the Being created a new cycle fueled with hatred.
`, `
	The Being's progress increased by leaps and bounds.
	It had filled much more of the never-ending void.
	But the Being was still not satisfied.
	The void was nowhere close to the new world it wanted.
	The Being searched through all of the Hexes for any clues...
`, `
	Then, the it found what it was looking for.
	A passage to another plane of existence.
	A world filled with demons, still remaining even now.
	All had failed to break the barrier between worlds.
	The Being knew that, but it did not give up.
`, `
	The Being looked through a narrow crack...
	It then observed what a complete world looked like.
	The Being began using the thoughts of the demons for Essence.
	Much more Essence filled the void, tainted by darkness.
	The void now held six distinct colors.
	The being had replicated the very Souls of the demons.
`, `
	The color of Demon Souls, a violent red.
	The Being created more and more, cycling many times.
	The colors blended and meshed, improving each other.
	A spectrum of color radiated throughout the darkness.
	However, the Being saw missing colors still.
	Something was still missing...
`, `
	The demon world was too different from the void.
	The Being had no choice but to remember the old world.
	It delved into its memories, hoping to uncover something new.
	The Being reached further than it ever had before.
	As more and more hatred filled its thoughts...
`], [`
	The Being saw a glimpse of something hopeful.
	Something it had never considered before.
	A warm, fuzzy feeling grew in the middle of the anger.
	The anger and hatred began to subside...
	And the Being began piecing things together.
`, `
	Just as Quarks formed Particles, Particles formed Atoms.
	The Being found more invaluable knowledge.
	However, the Being went further into its memories.
	The Being wanted to find the source of that warm feeling.
	The feeling that was completely opposite of the dark hatred.
`, `
	More of the Being's memories began to gush forth.
	The Being absorbed all of the knowledge, but was never satisfied.
	It didn't care about the many variations of Atoms.
	The Being almost forgot about the endless void.
	Then, all of a sudden, the Being found the source of that feeling.
`, `
	Memories of happiness flooded the Being's thoughts.
	The Being felt liberated from the darkness.
	The Being bathed in light for the first time.
	The void began being filled with blinding light...
	And then, the being discovered a mechanism to create more light.
`, `
	This mechanism the Being found was called praying.
	Everything was so much easier than before.
	Barely anything had to be reset to pray for light.
	The Being finally found a respite in the lonely void.
	The Being did not know who responded to its Prayers...
	But it felt grateful towards that unkown existence.
`, `
	The Being was filled with happiness.
	It began filling the void with divinity and holiness.
	All the colors in the void swirled in a marvelous spiral.
	The being then used their knowledge to go even further...
	And the Prayers started transforming into hymns.
`, `
	However, the feelings of anger and hatred would not fully subside.
	The Being tried to make the dark and light work together...
	But none of its countless attempts succeeded.
	The darkness was still too much stronger than the light.
	So the Being tried to condense all of their prayers...
`], [`
	<b>--- 37th sunset ---</b>
	Today, I found some ruins of human structures.
	There was some paper and ink in some of the fallen houses.
	I still can't remember anything before the first sunrise,
	but I'm writing my discoveries now so I don't forget agin.
	I can't find any corpses here, though, which is odd.
`, `
	<b>--- 61st sunset ---</b>
	Today, I found a cave suitable to construct a home in.
	Lots of trees good for building and edible plants for food nearby.
	I just have to be careful of the bear territory towards the west.
	I still haven't encountered a creature I can communicate with.
	You know, I wonder where all the rivers lead...
`, `
	<b>--- 80th sunset ---</b>
	Yesterday, my home was destroyed by the bears.
	I have never see a whole pack of them like that before.
	At least I managed to salvage this record and a small amount of food.
	However, food is getting harder to find now that the temperature is dropping.
	Just gathering and hunting won't be enough now that my home is gone.
`, `
	<b>--- 102nd sunset ---</b>
	Today, I discovered a human settlement while on the brink of death.
	The people living there provided me with food and water.
	However, conflict is rife throughout the settlement.
	I have decided to stay here until it gets deadly.
	This place is even more dangerous than the forest,
	but their farming techniques should prove very helpful.
`, `
	<b>--- 134th sunset ---</b>
	Somehow, I managed to convince the leaders of both factions to hold a meeting at the triangle.
	It's very dangerous being the intermediary, but if this succeeds...
	I have everything prepared to escape the settlement if I fail.
	As I'm reading through all the previous 48 entries, I feel confidence.
	I have survived through so much, so something like this can't stop me.
`, `
	<b>--- Year 1, Day 253 ---</b>
	I met with the chiefs of the other villages today on the plateau.
	We established a trade route to trade some crops for weapons.
	As methods of communication improve, our village really needs to be ready for anything.
	Humans are becoming a bigger threat to our lives than most wild animals.
	I can't believe so much has changed in the hundred sunrises I have witnessed as the chief.
`, `
	<b>--- Year 3, Day 126 ---</b>
	I haven't been able to write much recently because I have been so busy.
	But if the citizens are content, that is enough for me.
	Leading over a thousand people is truly very, very tiring.
	I can't belive it has been over a year since that fateful day...
	Anyway, new tribes and villages have joined us recently.
	The new citizens seem to look up to me and keep calling me Tzar.
	I'll have to ask one what that word means tomorrow.
`, `
	<b>--- Year 8, Day 357 ---</b>
	A new year is fast approaching, and the festives are already underway.
	It's always nice to see the citizens having a good time.
	However, I think my time left in this world is almost up.
	I am going pass on what is left of these records.
	I'm sure that child will lead the people brilliantly.
	May the Spectrum's blessing be with you, children of the future.
`], [`
	The Being created something new, unearthed from its memories.
	A great structure consisting of innumerable Prayers.
	This structure radiated bright green light throughout the void.
	The Being recalled this feeling of basking in this light...
	This spring green light, representing warmpth.
`, `
	The Being decided to name this new structure a Sanctum.
	Then, the Being set off to create more.
	The process went smoothly once it knew how to do it,
	And many more Sanctums began filling the void.
`, `
	The Being took pride in its new creation.
	However, it was not done creating things just yet.
	It dug through every scrap of knowledge it had...
	Searching, searching, and searching even more...
	Until the Being found all the components it needed.
`, `
	The Being began combining all of its Sanctums and Prayers.
	It fueled the process with many different types of resources.
	Blinding light filled the void as something emerged...
	Within the light was a Relic of times long gone,
	infused with the very essence of the void.
`, `
	The Being quickly started creating more Sanctums to make another...
	And everything cycled on, once again.
	Discovering more Relics, then empowering them...
	As this process continued, more and more light blossomed.
	The light reached further and further, expanding outwards.
`, `
	The Being was filled with warmpth like never before.
	It continued on, working harder and harder.
	However, things began to slow.
	The new Relics started needing too much light to empower.
	So the Being set out in search of more light.
`, `
	The Being searched and searched, but it couldn't find enough.
	The Being started to become disheartened.
	However, when it barely managed to activate one more Relic...
	The Being saw that the Relic was filled with glowing words.
	As the Being read the text, it realised what it was missing...
`], [`
	The Atoms that the Being previously disregarded,
	Could build many different important things.
	Specific combinations of Atoms could create Molecules.
	Molecules were hard to construct, but they could do many things.
	As the Being created more, the whole process became smoother.
`, `
	Molecules could generate light while the Being worked on other tasks.
	They also increased the Being's understanding of Atoms,
	Which in turn increased their generation.
	Soon enough, the Being began creating new types of Molecules.
	Beyond the simple Molecules that just combine multiple of the same Atom.
`, `
	The Being was filled with ever-expanding knowledge.
	Carbon monoxide. Water. Salt. Calcium Hydroxide.
	The Being gradually increased the complexity of the Molecules.
	Glucose. Cholesterol. Arborol. Insulin.
	Each new molecule granted unique benefits to the cycle.
`, `
	As the Being accumulated more Relics and Molecules,
	Things began to slow down again.
	However, the Being was calm, and kept going.
	It had experienced this so many times that it knew what to do.
	The Being began to condense all of its resources.
`, `
	Prayers, Sanctums, Relics, light... all being condensed...
	Into the very core of their concepts.
	The Being had created a new force, and it was named Good Influence.
	Good Influence was the core of the path of good laid bare.
	It was so simplistic, yet so powerful.
`, `
	With this newfound power, the Being discovered even more Relics.
	The Being then empowered even more of them with the new aid.
	The cycle continued. More Molecules. More Relics. More of everything.
	With so much Good Influence, the Being decided it was time again.
	To try to combine the darkness and light yet again.
`, `
	The Being tried and tried, yet it couldn't succeed.
	The goodness was too powerful now, drowning out the darkness.
	Thus, the Being searched through the darkness...
	Searching through itself and the endless void...
	Peering into the demon realm time and time again...
	Until...
`], [`
	More story coming soon!
`]];

const storyNames = [
	["The Endless Void", () => randomStr(3) + " " + randomStr(7) + " " + randomStr(4)],
	["The World's End", () => randomStr(3) + " " + randomStr(7) + " " + randomStr(3)],
	["Knowledge of the Old World", () => randomStr(9) + " " + randomStr(2) + " " + randomStr(3) + " " + randomStr(3) + " " + randomStr(5)],
	["Negative Emotions Given Form", () => randomStr(8) + " " + randomStr(8) + " " + randomStr(5) + " " + randomStr(4)],
	["Hope and Faith", () => randomStr(4) + " " + randomStr(3) + " " + randomStr(5)],
	["Records of the Founder", () => randomStr(7) + " " + randomStr(2) + " " + randomStr(3) + " " + randomStr(7)],
	["Magnificent Structures", () => randomStr(11) + " " + randomStr(10)],
	["Influence of Knowledge", () => randomStr(9) + " " + randomStr(2) + " " + randomStr(9)],
	["Coming Soon", () => "Coming Soon"],
];

const storyColors = [
	["#4CED13", "#D2D237"],
	[],
	["#DB5196", "#710CC4"],
	["#E36409", "#BA0035"],
	["#4D2FE0", "#FDBBFF"],
	[],
	["#AAFF00", "#B9A975"],
	["#00CCCC", "#08FF87"],
];

for (let index = 0; index < story.length; index++) {
	if (story[index][0].startsWith('\n\t')) story[index][0] = story[index][0].slice(2);
	story[index] = story[index].map(value => value.replace(/\n\t/g, '<br><br>').trim());
};

story[0][0] = '...<br>' + story[0][0].replace(/<br><br>/g, '<br>...<br>');

function storyLength(number) {
	if (number < 0) return 0;
	let length = 0;
	for (let index = 0; index < story.length && index <= number; index++) {
		length += story[index].length;
	};
	return length;
};

function filterStory(string) {
	if (player.ch.best.toNumber() < storyLength(0)) string = string.replace(/void|spark|cycle/gi, match => randomStr(match.length));
	if (player.ch.best.toNumber() < storyLength(1)) string = string.replace(/pitch|black|light/gi, match => randomStr(match.length));
	if (player.ch.best.toNumber() < storyLength(2)) string = string.replace(/knowledge|memories/gi, match => randomStr(match.length));
	if (player.ch.best.toNumber() < storyLength(3)) string = string.replace(/anger|hatred|curses|hate/gi, match => randomStr(match.length));
	if (player.ch.best.toNumber() < storyLength(4)) string = string.replace(/warm|fuzzy|feeling|happiness/gi, match => randomStr(match.length));
	if (player.ch.best.toNumber() < storyLength(5)) string = string.replace(/human|home|lead|chief/gi, match => randomStr(match.length));
	if (player.ch.best.toNumber() < storyLength(6)) string = string.replace(/structure|warmpth/gi, match => randomStr(match.length));
	if (player.ch.best.toNumber() < storyLength(7)) string = string.replace(/combination|construct|force/gi, match => randomStr(match.length));
	return string;
};

function getChaosInfoBoxes() {
	let infoBoxes = {};
	for (let row = 0; row < story.length; row++) {
		infoBoxes['story' + row] = {
			title() {
				if (player.ch.best.toNumber() >= storyLength(row)) return '<span style="margin-left: 2px">' + storyNames[row][0];
				else return '<span style="margin-left: 2px">' + storyNames[row][1]();
			},
			body() {
				let text = '';
				for (let index = 0; index < story[row].length && index < player.ch.best.toNumber() - storyLength(row - 1); index++) {
					text += story[row][index];
				};
				return filterStory(text);
			},
			unlocked() { return player.ch.best.toNumber() > storyLength(row - 1) },
		};
		if (storyColors[row] && storyColors[row].length > 0) {
			infoBoxes['story' + row].style = {'border-color': storyColors[row][0], 'border-radius': '0px'};
			infoBoxes['story' + row].titleStyle = {'background-color': storyColors[row][0], 'border-radius': '0px'};
			infoBoxes['story' + row].bodyStyle = {'margin-bottom': '0px', 'border-image-source': 'linear-gradient(' + storyColors[row][0] + ', ' + storyColors[row][1] + ')', 'border-image-slice': '4', 'border-radius': '0px'};
		} else {
			infoBoxes['story' + row].style = {'border-radius': '0px'};
			infoBoxes['story' + row].titleStyle = {'border-radius': '0px'};
			infoBoxes['story' + row].bodyStyle = {'margin-bottom': '0px', 'border-radius': '0px'};
		};
	};
	return infoBoxes;
};
